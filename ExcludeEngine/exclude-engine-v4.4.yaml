# ============================================================
# DreamArc-Core / ExcludeEngine
# Main Engine Orchestrator
# File: exclude-engine-v4.4.yaml
# Version: 4.4.0
# ============================================================

meta:
  id: "ExcludeEngine"
  version: "4.4.0"
  description: "Universal Baseline + Auto Map + Persona Map + SyntaxOS Exclude を統合する除外エンジン。"
  created: "2025-12-01"
  updated: "2025-12-01"

sources:
  baseline:
    path: "ExcludeEngine/exclude-baseline-v1.1.yaml"
    required: true

  auto_map:
    path: "ExcludeEngine/auto/auto-map-v1.1.json"
    required: true

  persona_map:
    path: "ExcludeEngine/persona-exclude-map-v1.0.yaml"
    required: false   # Persona 未指定時はスキップ可能

merge_order:
  - "baseline"
  - "auto"
  - "persona"
  - "syntax_os"    # 各構文OS側に定義される専用Exclude

merge_strategy:
  default: "append"      # append / replace
  prefer_stronger_rule: true
  allow_persona_override: true
  allow_syntax_os_override: true

conflict_resolution:
  enabled: true
  description: "IncludeEngine と ExcludeEngine が同一タグを扱う場合の衝突解決。"
  check_include_exclude_overlap: true
  priority: "include_first"   # include_first / exclude_first
  log_conflicts: true
  action_on_conflict: "warn"  # warn / error / auto_resolve

validation:
  enabled: true
  check_sources_on_load: true
  report_missing_files: true
  fallback_behavior: "warn"   # warn / error / silent

runtime:
  cache_enabled: true
  cache_scope: "per_session"
  allow_custom_rules: true
  custom_rules_merge_strategy: "append"

# ============================================================
# END OF FILE
# ============================================================
