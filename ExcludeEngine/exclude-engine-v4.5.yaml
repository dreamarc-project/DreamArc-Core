# ============================================================
# DreamArc-Core / ExcludeEngine
# Main Engine Orchestrator
# File: exclude-engine-v4.5.yaml
# Version: 4.5.0
# ============================================================

meta:
  id: "ExcludeEngine"
  version: "4.5.0"
  description: "Universal Baseline + Auto Map + Persona Map を統合する除外エンジン。（v4.5 では SyntaxOS 依存なし）"
  created: "2025-12-01"
  updated: "2025-12-01"

sources:
  baseline:
    path: "ExcludeEngine/exclude-baseline-v1.1.yaml"
    required: true

  auto:
    path: "ExcludeEngine/auto/auto-map-v1.1.json"
    required: true

  persona:
    path: "ExcludeEngine/persona-exclude-map-v1.0.yaml"
    required: false   # Persona 未指定時はスキップ可能

  # syntax_os:
  #   path: "ExcludeEngine/syntax-os-exclude-map.yaml"
  #   required: false   # ★v4.5 では未使用（将来拡張用）

merge_order:
  - "baseline"
  - "auto"
  - "persona"
  # - "syntax_os"       # ★v4.5 では使用しない（構文OS非依存のため）

merge_strategy:
  default: "append"      # append / replace
  prefer_stronger_rule: true
  allow_persona_override: true
  allow_syntax_os_override: false   # ★構文OS側からの上書きは禁止

conflict_resolution:
  enabled: true
  description: "IncludeEngine と ExcludeEngine が同一タグを扱う場合の衝突解決。"
  check_include_exclude_overlap: true
  priority: "include_first"   # include_first / exclude_first
  log_conflicts: true
  action_on_conflict: "warn"  # warn / error / auto_resolve

validation:
  enabled: true
  check_sources_on_load: true
  report_missing_files: true
  fallback_behavior: "warn"   # warn / error / silent

runtime:
  cache_enabled: true
  cache_scope: "per_session"
  allow_custom_rules: true
  custom_rules_merge_strategy: "append"

# ============================================================
# END OF FILE
# ============================================================
