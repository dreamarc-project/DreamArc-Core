# ============================================================
# DreamArc PromptCleaner v4.5
# Purpose: Remove ALL syntax/module identifiers from FinalPrompt
# Layer: Applies AFTER PromptBuilder and BEFORE Exclude/Include
# Safety: Guaranteed "SyntaxLeak = ZERO"
# ============================================================

rules:

  # ------------------------------------------------------------
  # 1. <SyntaxModule:DA-◯◯> タグの完全除去
  # ------------------------------------------------------------
  - pattern: "<\\s*SyntaxModule\\s*:[^>]+>"
    replace: ""

  # ------------------------------------------------------------
  # 2. DA-系構文IDの除去（DA-YO / DA-NANA / DA-KG / その他の DA-◯◯ すべて）
  # ------------------------------------------------------------
  - pattern: "\\bDA-[A-Za-z0-9_-]+\\b"
    replace: ""

  # ------------------------------------------------------------
  # 3. 短縮コードの除去（YO / NANA / KG / NA 等）
  # ------------------------------------------------------------
  - pattern: "\\b(YO|NANA|KG|NA)\\b"
    replace: ""

  # ------------------------------------------------------------
  # 4. "YOStyle" / "NANAStyle" / "KGStyle" などの派生系の除去
  # ------------------------------------------------------------
  - pattern: "\\b(YO|NANA|KG)[A-Za-z0-9_-]+\\b"
    replace: ""

  # ------------------------------------------------------------
  # 5. "JPop,YOStyle,EmotionalPop" 形式のカンマ区切りブロックの除去
  #    → PromptBuilder の結合過程で稀に発生する副作用を完全除去
  # ------------------------------------------------------------
  - pattern: "(YO|NANA|KG)[^,]*,"
    replace: ""

  # ------------------------------------------------------------
  # 6. 隠れ構文名（OS名が description や alias に変換されたもの）の除去
  #    例：YOASOBIFlow / NanaAttack / KGDrive など
  # ------------------------------------------------------------
  - pattern: "\\b([A-Z][a-z]+(Flow|Attack|Drive|Beat|Style))\\b"
    replace: ""

  # ------------------------------------------------------------
  # 7. その他の Syntax 名残り（固有名詞が語尾に付く形式）を削除
  #    例：◯◯-YO / ◯◯-KG など
  # ------------------------------------------------------------
  - pattern: "[A-Za-z0-9_-]+-(YO|KG|NANA|NA)\\b"
    replace: ""

  # ------------------------------------------------------------
  # 8. 二重適用時のクリーンアップ（余分なスペースを除去）
  # ------------------------------------------------------------
  - pattern: "\\s{2,}"
    replace: " "

